<!doctype html>
<html ng-app="addressLookup">
	<head>
		<title>Eircode API test client</title>
		
		<script src="/js/angular.min.js"></script>
    	<script src="/js/app.js"></script>
    	<script src="/js/EircodeTestClient.js"></script>
    	
    	<style>
		table, th, td {
		    border: 1px solid black;
		}
		</style>
	</head>

	<body>
		<div ng-controller="EircodeTestClient as vm">
			
			<h1>Eircode test client</h1>
			
			<p>
				<label>API Key:</label>
				<input type="text" ng-model="vm.apiKey">
			</p>
			<p>
				<label>Country:</label>
				<select ng-model="vm.country" ng-options="country.code for country in vm.countries"></select>
			</p>
			<p ng-show="vm.country.code=='ie'">
				<label>Lookup type:</label>
				<select ng-model="vm.lookupType" ng-options="lookupType.name for lookupType in vm.lookupTypes"></select>
			</p>
			<p ng-show="vm.lookupType.name!='rgeo'">
				<label>Eircode/Postcode or address fragment:</label>
				<input type="text" ng-model="vm.search">
			</p>
			<p ng-show="vm.lookupType.name=='rgeo'">
				<label>Latitude:</label>
				<input type="text" ng-model="vm.latitude">
			</p>
			<p ng-show="vm.lookupType.name=='rgeo'">
				<label>Longitude:</label>
				<input type="text" ng-model="vm.longitude">
			</p>
			<p ng-show="vm.lookupType.name=='rgeo'">
				<label>Distance:</label>
				<input type="text" ng-model="vm.distance">
			</p>
			
			<button type="button" ng-click="vm.lookup()">Search</button>
			
			<div ng-show="vm.resultList != null">
			
				<h2>Results:</h2>
				
				<table ng-repeat="result in vm.resultList" style="margin-top: 10px;">
					<tr ng-repeat="(key, value) in result">
						<td>{{key}}</td><td>{{value}}</td>
					</tr>
				</table>
				
				<h2>JSON response:</h2>
				
				<p>
				{{vm.resultList}}
				</p>
				
			</div>
			
		</div>
	</body>
</html>